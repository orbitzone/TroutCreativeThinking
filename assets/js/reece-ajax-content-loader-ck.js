(function(){window.ajaxContentLoader={};window.ajaxContentLoader={$el:$("[data-load-content]"),offset:8,init:function(){this.$el.on("click.contentload.data-api",$.proxy(this.requestData,this))},requestData:function(e){e.preventDefault();var t=this,n=$(e.currentTarget);t.offset+=4;jQuery.ajax({type:"POST",beforeSend:this.addContentLoader(n),url:"/includes/ajax/ajax.php",data:{offset:t.offset},dataType:"JSON",success:function(e){t.removeContentLoader(n);t.fetchTemplate(e,n)}})},addContentLoader:function(e){e.addClass("ajax-preloader")},removeContentLoader:function(e){console.log("remove");e.removeClass("ajax-preloader")},fetchTemplate:function(e,t){var n=$('<div style="display: none;" class="row-fluid"/>'),r="";for(var i=0;i<e.length;i++)r+=tmpl("product_block_template",e[i]);n=n.append(r);t.before(n);n.slideDown()}}})();$(function(){window.ajaxContentLoader.init()});