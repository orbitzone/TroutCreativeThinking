var isMobile={Windows:function(){return/IEMobile/i.test(navigator.userAgent)},Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}},deviceMobile=isMobile.any(),isIE=function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE");return b>0?parseInt(a.substring(b+5,a.indexOf(".",b))):navigator.userAgent.match(/Trident\/7\./)?11:!1},ieV=isIE(),playerManager={players:{},holdingList:[],active:"",status:"",activate:function(a){this.active=a},getActive:function(){return this.players[this.active]},add:function(a,b){this.players[b.container]={player:a,settings:b}},addHoldingList:function(a){this.holdingList.push(a)},getNextHoldingList:function(){return this.holdingList.length>0?this.holdingList[0]:!1},removeHoldingList:function(){this.holdingList.shift()},loadNext:function(){var a=this.getNextHoldingList();if(a!==!1){var b=new player;b.init(a),this.removeHoldingList()}},update:function(a,b){this.players[b.container].settings=b},play:function(a,b){if(this.exists(a)){playerManager.activate(a);var c=this.players[a].player;"undefined"!=typeof b&&(this.players[a].settings.mute=b);var d=this.players[a].settings;"undefined"!=typeof c.playVideo&&(1==d.mute?c.mute():0===d.mute&&c.unMute(),$(window).scrollTop()<=$("#"+a).offset().top+$("#"+a).outerHeight()&&c.playVideo())}},pause:function(a){if(this.exists(a)){var b=this.players[a].player;"undefined"!=typeof b.pauseVideo&&b.pauseVideo()}},stop:function(a){if(this.exists(a)){var b=this.players[a].player;"undefined"!=typeof b.stopVideo?b.stopVideo():this.getActive().settings.autoplay=!1,"function"==typeof this.players[a].settings.onStop&&this.players[a].settings.onStop()}},mute:function(a){if(this.exists(a)){var b=this.players[a].player;b.mute()}},unmute:function(a){if(this.exists(a)){var b=this.players[a].player;b.unMute()}},onChangeState:function(a){var b=a.target.c.id,c=this.players[b];a.data===YT.PlayerState.ENDED&&1==c.settings.loop&&this.players[c.settings.container].player.playVideo(),a.data===YT.PlayerState.PLAYING&&"function"==typeof c.settings.onPlaying&&c.settings.onPlaying(),a.data===YT.PlayerState.PAUSED&&"function"==typeof c.settings.onPaused&&c.settings.onPaused(),a.data===YT.PlayerState.BUFFERING&&"function"==typeof c.settings.onBuffering&&c.settings.onBuffering(),a.data===YT.PlayerState.ENDED&&"function"==typeof c.settings.onEnded&&c.settings.onEnded()},exists:function(a){return"undefined"!=typeof this.players[a]?!0:!1},remove:function(a){}},player=function(){this.settings={container:"",videoId:"",playerVars:{showinfo:0,modestbranding:0,rel:0,origin:"http://reece-responsive.local"},autoplay:!1,loop:!1,mute:!1,onReady:function(){},onEnded:function(){},onPaused:function(){},onBuffering:function(){},onPlaying:function(){}},this.ready=!1,this.obj={},this.init=function(a){if("loading"==playerManager.status)playerManager.addHoldingList(a);else{a.playerVars=$.extend({},this.settings.playerVars,a.playerVars),this.settings=$.extend({},this.settings,a);var b=this;if("undefined"==typeof YT||"undefined"==typeof YT.Player){playerManager.status="loading",window.onYouTubeIframeAPIReady=function(){playerManager.add(b.loadPlayer(),a)};var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}else playerManager.exists(this.settings.container)?(playerManager.update(this.settings.container,a),a.autoplay&&playerManager.play(this.settings.container)):(playerManager.status="loading",playerManager.add(this.loadPlayer(),a))}},this.loadPlayer=function(){playerManager.activate(this.settings.container);var a=this.settings.container,b=this.settings,c={videoId:this.settings.videoId,width:790,height:444,playerVars:this.settings.playerVars,events:{onReady:function(c){playerManager.players[a];if(b.autoplay&&!deviceMobile&&("undefined"!=typeof b.mute?playerManager.play(a,b.mute):playerManager.play(a)),"function"==typeof b.onReady){var d=b.onReady;setTimeout(function(){d(a)},500)}playerManager.status="ready",playerManager.loadNext(),$(window).resize()},onStateChange:function(a){playerManager.onChangeState(a)}}};return new YT.Player(this.settings.container,c)},this.play=function(a,b){var c=player.obj[a].player;"undefined"!=typeof c.playVideo&&("undefined"!=typeof b&&b&&c.mute(),c.playVideo())},this.stop=function(a){var b=this;if("undefined"!=typeof a){var c=player.obj[a].player;"undefined"!=typeof c.stopVideo?c.stopVideo():b.autoplay=!1}else $.each(b.obj,function(a){"undefined"!=typeof b.obj[a].player.stopVideo&&b.obj[a].player.stopVideo()})}},bathroomHappiness={init:function(){1==isMobile.any()?$("body").addClass("mobile"):$("body").addClass("desktop"),$("body").hasClass("homepage")&&this.homepage(),$("body").hasClass("inspiration")&&this.inspiration(),$("body").hasClass("trends")&&this.trends(),$("body").hasClass("water-therapy")&&this.waterTherapy()},homepage:function(){$(".subscribe-form").validate(),$(".panel-slideshow").each(function(){var a=$(this).find(".slideshow-buttons");$(this).find(".slideshow-container").slick({appendArrows:a,responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:460,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}}]})}),$(".panel-slideshow").each(function(){var a=$(this).data("section");$(this).find(".slideshow-container a").on("mouseover",function(){$("."+a).addClass("hover")}).on("mouseout",function(){$("."+a).removeClass("hover")})})},inspiration:function(){var a=$(".block.water-therapy .video").data("video");if($(window).on("resize",function(){var a=$(".blocks .water-therapy .content").height(),b=16*a/9;$("#water-therapy-video").width(b),$("#water-therapy-video").height(a+200)}).resize(),isMobile.any())$("#water-therapy-video").parent().addClass("ready"),isMobile.any()&&$("#water-therapy-video").remove();else{var b="water-therapy-video";if(a){var c={showinfo:0,modestbranding:0,rel:0},d=new player;d.init({container:b,videoId:a,autoplay:1,mute:1,loop:1,onReady:function(){$("#water-therapy-video").parent().parent().parent().addClass("ready"),$("#water-therapy-video").parent().addClass("ready")},playerVars:c})}}},trends:function(){var a=$(window).width(),b=588,c=!0;$(window).on("resize",function(){a=$(window).width(),b=588,1200>a&&a>991?b=459:992>a&&(b=358),deviceMobile&&(c=!1),768>a&&(c=!1)}).resize(),$(".bathroom-gallery .image").each(function(){var a;$(this).on("mouseover",function(){if(c){var d=($(this).find(".image img").attr("src"),15),e=$(this).find(".animation"),f="right";e.data("frame",0),e.show(),clearInterval(a),a=setInterval(function(){if(frame=1*e.data("frame"),"right"==f)var a=++frame%d*-b;else var a=--frame%d*-b;e.data("frame",frame),14==frame?f="left":0==frame&&(f="right"),e.css({"background-position":a+"px 0px"})},200)}}).on("mouseout",function(){if(c){var d=15,e=$(this).find(".animation"),f=1*e.data("frame");f>0?(clearInterval(a),a=setInterval(function(){f=1*e.data("frame");var c=--f%d*-b;0==f&&(clearInterval(a),e.hide()),e.data("frame",f),e.css({"background-position":c+"px 0px"})},50)):(clearInterval(a),e.css({"background-position":"0px 0px"}),e.hide())}})})},waterTherapy:function(){var a=$(window).width();if(deviceMobile)$("#water-therapy-video").addClass("ready"),isMobile.any()&&$("#water-therapy-video").remove(),$("#water-therapy-rejuvenation-video").addClass("ready"),isMobile.any()&&$("#water-therapy-rejuvenation-video").remove();else for(var b=["water-therapy","water-therapy-rejuvenation","water-therapy-relaxation","water-therapy-therapeutic","st-waterfall"],c=0;c<b.length;c++){var d=b[c]+"-video",e=$("#"+b[c]+"-video-wrap").data("video");if(e){var f={showinfo:0,modestbranding:0,rel:0,controls:0},g=0,h=0;"water-therapy"==b[c]&&(g=1,h=1);var i=new player;i.init({container:d,videoId:e,autoplay:g,loop:1,mute:h,onReady:function(a){"st-waterfall"!==a&&($("#"+a).parent().parent().addClass("ready"),$("#"+a).parent().addClass("ready"))},playerVars:f})}}$("#banner .stop-full-video").on("click",function(){var a="water-therapy-full-video";playerManager.stop(a),deviceMobile&&$.magnificPopup.close(),$("#banner .stop-full-video").removeClass("show"),$("#banner .play-full-video").removeClass("paused playing"),$("#water-therapy-full-video").fadeOut(300,0)}),$("#banner .play-full-video").on("click",function(){var a="water-therapy-full-video";if($(this).hasClass("playing"))$(this).removeClass("playing"),$(this).addClass("paused"),playerManager.pause(a);else{$("#banner .stop-full-video").addClass("show"),$(this).addClass("playing"),$("#water-therapy-full-video").show(),($(window).width()<768||deviceMobile)&&$.magnificPopup.open({mainClass:"mfp-water-therapy-full-video",items:{type:"inline",src:"#full-video-popup"},callbacks:{afterClose:function(){$("#banner .stop-full-video").removeClass("show"),$("#banner .play-full-video").removeClass("paused playing"),$("#full-video-popup").addClass("hide"),player.stop("water-therapy-full-video")}}});var b=$(this).data("video");if(b){var c={showinfo:0,modestbranding:0,rel:0},d=1;($(window).width()<768||deviceMobile)&&(d=0);var e=new player;e.init({container:a,videoId:b,autoplay:d,loop:!1,onReady:function(){$("#water-therapy-full-video").parent().addClass("ready")},onPlaying:function(){$("#banner .play-full-video").addClass("playing"),$("#full-video-popup").removeClass("hide");var a=$("#water-therapy").attr("class");playerManager.pause("water-therapy-"+a+"-video")},onEnded:function(){deviceMobile&&$.magnificPopup.close();var a=$("#water-therapy").attr("class");playerManager.play("water-therapy-"+a+"-video"),$("#banner .stop-full-video").removeClass("show"),$("#banner .play-full-video").removeClass("paused playing"),$("#full-video-popup").addClass("hide")},onStop:function(){var a=$("#water-therapy").attr("class");playerManager.play("water-therapy-"+a+"-video")},onPaused:function(){$("#banner .play-full-video").removeClass("paused playing"),$("#banner .play-full-video").addClass("paused")},playerVars:c}),$("#full-video-popup").removeClass("hide")}}}),$(".submenu button").on("click",function(){$(".submenu li").removeClass("active"),$(this).parent().addClass("active");var a=$(this).text().toLowerCase(),b=$("#intro .video-wrap").offset().top-50;if(deviceMobile)$("html, body").animate({scrollTop:b},500,function(){$("#water-therapy").attr("class",a)});else{var c="water-therapy-"+a+"-video",d=$("#"+c+"-wrap").data("video"),e=function(){if(d){playerManager.play(c,0)}setTimeout(function(){var b=["rejuvenation","relaxation","therapeutic"];$.each(b,function(b,c){c!==a&&playerManager.pause("water-therapy-"+c+"-video")})},10)};parseInt(b)==parseInt($(window).scrollTop())?($("#water-therapy").attr("class",a),e()):$("html, body").animate({scrollTop:b},500,function(){$("#water-therapy").attr("class",a),e()})}}),$("#water-therapy .slides").slick({arrows:!1,dots:!0}),$(".panel-slideshow").each(function(){var a=$(this).find(".slideshow-buttons");$(this).find(".grid-module-slider").length>0&&$(this).find(".grid-module-slider").slick({arrows:!0,dots:!1,appendArrows:a}),$(this).find(".slideshow-container").length>0&&$(this).find(".slideshow-container").each(function(){var b=1;$(this).data("slides")&&(b=parseInt($(this).data("slides"))),$(this).slick({appendArrows:a,slidesToShow:b,slidesToScroll:b,responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:460,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}}]})})}),$("#shower-technology .shower-technology-menu a").on("click",function(){$("#shower-technology .shower-technology-menu a").removeClass("active"),$("#shower-technology .shower-technology-description").removeClass("active"),$(this).addClass("active");var b=$(this).data("section"),c=$("#shower-technology .shower-technology-cards").offset().top-20;if(768>a?parseInt(c)==parseInt($(window).scrollTop())?($("#shower-technology .shower-technology-card").removeClass("active"),$("#shower-technology .st-"+b).addClass("active")):$("html, body").animate({scrollTop:c},500,function(){$("#shower-technology .shower-technology-card").removeClass("active"),$("#shower-technology .st-"+b).addClass("active")}):($("#shower-technology .shower-technology-card").removeClass("active"),$("#shower-technology .st-"+b).addClass("active")),"st"==playerManager.active.substring(0,2)&&playerManager.stop(playerManager.active),playerManager.exists())deviceMobile||playerManager.play("st-"+b+"video");else{var d=$("#st-"+b+"-video-wrap").data("video"),e="st-"+b+"-video",f={showinfo:0,modestbranding:0,rel:0,controls:0},g=new player;g.init({container:e,videoId:d,autoplay:0,loop:!1,onReady:function(a){deviceMobile||playerManager.play(a)},onPlaying:function(){},onEnded:function(){},onPaused:function(){},playerVars:f})}return!1}),$("#shower-technology .st-waterfall").addClass("active"),$("#shower-technology .view-video").on("click",function(){var a=$(this).data("section");return $("#shower-technology .st-"+a+" .shower-technology-description").toggleClass("active"),deviceMobile||playerManager.play("st-"+a+"-video"),setTimeout(function(){$("#shower-technology .st-"+a+" .shower-technology-description .close-video").addClass("active")},500),!1}),$("#shower-technology .close-video").on("click",function(){var a=$(this).data("section");return playerManager.stop("st-"+a+"-video"),$("#shower-technology .st-"+a+" .shower-technology-description .close-video").removeClass("active"),$("#shower-technology .st-"+a+" .shower-technology-description").toggleClass("active"),!1});var j=1;if($(window).on("resize",function(){$(".panel-slideshow").each(function(){var a=$(this).find(".slideshow-buttons");if($(this).find(".slide-image").length>0){var b=$(this).find(".slide-image").first().position().top+10+$(this).find(".slide-image").first().outerHeight();a.css({top:b})}});var b=$("#banner .banner").width(),c=9*b/16;$("#water-therapy-video").width(b),$("#water-therapy-video").height(c),deviceMobile?(b=$(window).width(),c=$(window).height(),$("#water-therapy-full-video").height(c),$("#water-therapy-full-video").width(b)):($("#water-therapy-full-video").height(c),$("#water-therapy-full-video").width(b));var b=$("#water-therapy .videos").width(),c=9*b/16;$("#water-therapy .videos iframe").width(b),$("#water-therapy .videos iframe").height(c),a=$(window).width();var d=$(".grid-module-intro-wrap").width();if(768>a){var e=$(".grid-module-zones-section").length;$(".grid-module-zones-sections").width(d*e),$(".grid-module-zones-section").width(d),c=$("#shower-technology .shower-technology-description .front").outerHeight(),$("#shower-technology .shower-technology-cards, #shower-technology .shower-technology-description .shower-technology-flip, #shower-technology .shower-technology-description .back").height(c)}else $(".grid-module-zones-sections").width(""),$(".grid-module-zones-section").width("");$(".grid-module-zones-sections").each(function(){var a=0;$(this).find(".grid-module-zones-section").each(function(){$(this).find(".grid-module-zone-1 .grid-module-slider img").width(d),9>=ieV?$(this).css({transform:"translate("+-1*a*d+"px,0)"}):$(this).css({transform:"translate3d("+-1*a*d+"px,0,0)"}),a+=1})})}).resize(),ieV){var k="";9>=ieV&&(k="ie-lt"),$(".grid-module-zones-section, .grid-module-zone-1, .grid-module-zone-2, .grid-module-zone-3, .shower-technology-card").addClass("ie "+k)}$(".grid-module").each(function(){var a=$(this);$(this).find(".grid-module-menu a, .scrolling-menu-list a").on("click",function(){var b=$(this).data("section");j=b;var c=1*b+1,d=1*b-1;a.find(".grid-module-menu a, .scrolling-menu-list a").removeClass("active"),a.find(".grid-module-menu a[data-section="+b+"], .scrolling-menu-list a[data-section="+b+"]").addClass("active"),a.find(".scrolling-menu-list, .scrolling-menu-wrap").removeClass("active"),c>a.find(".grid-module-zones-section").length&&(c=1),0==d&&(d=a.find(".grid-module-zones-section").length);a.find(".grid-module-intro-wrap").width();return parseInt(a.find(".grid-module-description").offset().top-50)==parseInt($(window).scrollTop())?(a.find(".grid-module-description .box-content").removeClass("active"),a.find(".grid-module-zones-section").removeClass("current prev next"),a.find(".grid-module-zones-section-"+b).addClass("current"),a.find(".grid-module-zones-section-"+c).addClass("next"),a.find(".grid-module-zones-section-"+d).addClass("prev"),a.find(".grid-module-description .box-content-"+b).addClass("active")):setTimeout(function(){$("html, body").animate({scrollTop:a.find(".grid-module-description").offset().top-50},500,function(){a.find(".grid-module-description .box-content").removeClass("active"),a.find(".grid-module-zones-section").removeClass("current prev next"),a.find(".grid-module-zones-section-"+b).addClass("current"),a.find(".grid-module-zones-section-"+c).addClass("next"),a.find(".grid-module-zones-section-"+d).addClass("prev"),a.find(".grid-module-description .box-content-"+b).addClass("active")})},300),!1}),$(this).find(".scrolling-menu-wrap .scrolling-menu").on("click",function(){$(".scrolling-menu-wrap .scrolling-menu-list, .scrolling-menu-wrap").toggleClass("active")})}),$(window).on("scroll",function(){var a=$(window).scrollTop();if(deviceMobile)a>=$(".submenu-wrap").offset().top&&a<=$("#water-therapy-content .shower-image").offset().top?($(".submenu-wrap").height($(".submenu").height()),$(".submenu").addClass("fixed")):($(".submenu-wrap").height(""),$(".submenu").removeClass("fixed"));else if(a>=$("#water-therapy-video-wrap").offset().top+$("#water-therapy-video-wrap").height()-20?$("#water-therapy-video-wrap").hasClass("paused")||($("#water-therapy-video-wrap").addClass("paused"),playerManager.pause("water-therapy-video")):$("#water-therapy-video-wrap").hasClass("paused")&&($("#water-therapy-video-wrap").removeClass("paused"),playerManager.play("water-therapy-video")),a>=$("#water-therapy .videos").offset().top+$("#water-therapy .videos").height()-20)$("#water-therapy .videos").hasClass("paused")||($("#water-therapy .videos").addClass("paused"),playerManager.pause("water-therapy-therapeutic-video"),playerManager.pause("water-therapy-relaxation-video"),playerManager.pause("water-therapy-rejuvenation-video"));else if($("#water-therapy .videos").hasClass("paused")){$("#water-therapy .videos").removeClass("paused");var b=$("#water-therapy").attr("class");playerManager.play("water-therapy-"+b+"-video")}$(".grid-module").each(function(){var b=$(this).find(".grid-module-menu").offset().top+$(this).find(".grid-module-menu").height()-50,c=$(this).offset().top-90+$(this).outerHeight();a>=b?a>=c?($(this).find(".scrolling-menu-wrap").removeClass("fixed"),$(this).find(".scrolling-menu-list, .scrolling-menu-wrap").removeClass("active")):$(this).find(".scrolling-menu-wrap").addClass("fixed"):($(this).find(".scrolling-menu-wrap").removeClass("fixed"),$(this).find(".scrolling-menu-list, .scrolling-menu-wrap").removeClass("active"))})})}};!function(a){a(function(){bathroomHappiness.init()})}(jQuery);