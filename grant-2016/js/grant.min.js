var player={autoplay:!1,active:"",obj:{},init:function(a,b){if("undefined"==typeof YT||"undefined"==typeof YT.Player){window.onYouTubeIframeAPIReady=function(){player.obj[a]=player.loadPlayer(a,b),player.autoplay&&player.play(a)};
//This code loads the IFrame Player API code asynchronously.
var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}else if("undefined"!=typeof player.obj[a]){var e=player.obj[a];e.getVideoData().video_id!=b?(player.obj[a].loadVideoById(b),player.autoplay&&player.play(a)):player.autoplay&&player.play(a)}else player.obj[a]=player.loadPlayer(a,b)},loadPlayer:function(a,b){return player.active=a,new YT.Player(a,{videoId:b,width:790,height:444,playerVars:{autoplay:player.autoplay,showinfo:0,modestbranding:0,rel:0},events:{onReady:function(b){1==player.autoplay&&player.play(a),$(window).resize()},onStateChange:function(a){a.data==YT.PlayerState.PLAYING&&$.each(player.obj,function(b){b!=a.target.m.id&&"undefined"!=typeof player.obj[b].stopVideo&&player.obj[b].stopVideo()})}}})},play:function(a){var b=player.obj[a];"undefined"!=typeof b.playVideo&&b.playVideo()},stop:function(a){if("undefined"!=typeof a){var b=player.obj[a];"undefined"!=typeof b.stopVideo?b.stopVideo():player.autoplay=!1}else $.each(player.obj,function(a){"undefined"!=typeof player.obj[a].stopVideo&&player.obj[a].stopVideo()})}},grant={init:function(){this.countdown(),$("#grant").hasClass("news")&&this.news(),$("#grant").hasClass("homepage")&&this.homepage(),$("#grant").hasClass("projects")&&this.projects(),$(".winners-slider").length>0&&this.winnersSlider(),this.applyNow()},homepage:function(){if($(".grid").length>0)var a=new Masonry(".grid",{itemSelector:".grid-item"});$("#feed").imagesLoaded().always(function(a){$(window).resize()}),$(window).on("resize",function(){var b=0,c=0;$("#feed .item").height(""),$("#feed .item").each(function(){$(this).hasClass("double")?$(this).height()>b&&(b=$(this).height()):$(this).height()>c&&(c=$(this).height())}),b>2*c?($("#feed .item.double").height(b),$("#feed .item.single").height(b/2)):($("#feed .item.double").height(2*c),$("#feed .item.single").height(c)),a.layout()})},projects:function(){$("aside a").on("click",function(){
//$(this).parent().addClass('active');
return $(this).hasClass("active")?$(this).parent().find("ul").slideUp():$(this).parent().find("ul").slideDown(),$(this).toggleClass("active"),!1}),$(".person-video").length>0&&($(".person-video").slick(),$(".person-video .play-button").on("click",function(){$(".person-video").slick("slickNext");var a=$("#the-player"),b=a.data("video");b&&(player.autoplay=!0,player.init("the-player",b))}))},news:function(){$(".slider-thumbs").slick({prevArrow:'<button type="button" class="slick-prev"><svg viewBox="0 0 26 46" id="shape-arrow-left"><title>arrow-left</title> <g id="arrow-left-arrow-left"> <path d="M24.4,0.6C24.1,0.2,23.5,0,23,0c-0.5,0-1,0.2-1.4,0.6l-21,21c-0.8,0.8-0.8,2.1,0,2.8l21,21c0.8,0.8,2.1,0.8,2.8,0c0.8-0.8,0.8-2.1,0-2.8L4.9,23L24.4,3.4C25.2,2.6,25.2,1.4,24.4,0.6z"/> </g> </svg></button>',nextArrow:'<button type="button" class="slick-next"><svg viewBox="0 0 26 46" id="shape-arrow-right"><title>arrow-right</title> <g id="arrow-right-arrow-right"> <path d="M1.6,45.4C2,45.8,2.5,46,3,46c0.5,0,1-0.2,1.4-0.6l21-21c0.8-0.8,0.8-2.1,0-2.8l-21-21c-0.8-0.8-2.1-0.8-2.8,0c-0.8,0.8-0.8,2.1,0,2.8L21.2,23L1.6,42.6C0.8,43.4,0.8,44.7,1.6,45.4z"/> </g> </svg></button>',slidesToScroll:4,slidesToShow:4,asNavFor:".slider-main",focusOnSelect:!0}),$(".slider-main").slick({prevArrow:'<button type="button" class="slick-prev"><svg viewBox="0 0 26 46" id="shape-arrow-left"><title>arrow-left</title> <g id="arrow-left-arrow-left"> <path d="M24.4,0.6C24.1,0.2,23.5,0,23,0c-0.5,0-1,0.2-1.4,0.6l-21,21c-0.8,0.8-0.8,2.1,0,2.8l21,21c0.8,0.8,2.1,0.8,2.8,0c0.8-0.8,0.8-2.1,0-2.8L4.9,23L24.4,3.4C25.2,2.6,25.2,1.4,24.4,0.6z"/> </g> </svg></button>',nextArrow:'<button type="button" class="slick-next"><svg viewBox="0 0 26 46" id="shape-arrow-right"><title>arrow-right</title> <g id="arrow-right-arrow-right"> <path d="M1.6,45.4C2,45.8,2.5,46,3,46c0.5,0,1-0.2,1.4-0.6l21-21c0.8-0.8,0.8-2.1,0-2.8l-21-21c-0.8-0.8-2.1-0.8-2.8,0c-0.8,0.8-0.8,2.1,0,2.8L21.2,23L1.6,42.6C0.8,43.4,0.8,44.7,1.6,45.4z"/> </g> </svg></button>',focusOnSelect:!0})},winnersSlider:function(){$(".cards-slider").slick({prevArrow:'<button type="button" class="slick-prev"><svg viewBox="0 0 26 46" id="shape-arrow-left"><title>arrow-left</title> <g id="arrow-left-arrow-left"> <path d="M24.4,0.6C24.1,0.2,23.5,0,23,0c-0.5,0-1,0.2-1.4,0.6l-21,21c-0.8,0.8-0.8,2.1,0,2.8l21,21c0.8,0.8,2.1,0.8,2.8,0c0.8-0.8,0.8-2.1,0-2.8L4.9,23L24.4,3.4C25.2,2.6,25.2,1.4,24.4,0.6z"/> </g> </svg></button>',nextArrow:'<button type="button" class="slick-next"><svg viewBox="0 0 26 46" id="shape-arrow-right"><title>arrow-right</title> <g id="arrow-right-arrow-right"> <path d="M1.6,45.4C2,45.8,2.5,46,3,46c0.5,0,1-0.2,1.4-0.6l21-21c0.8-0.8,0.8-2.1,0-2.8l-21-21c-0.8-0.8-2.1-0.8-2.8,0c-0.8,0.8-0.8,2.1,0,2.8L21.2,23L1.6,42.6C0.8,43.4,0.8,44.7,1.6,45.4z"/> </g> </svg></button>',slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!1,infinite:!1}),$(".winners-slider").slick({prevArrow:'<button type="button" class="slick-prev"><svg viewBox="0 0 26 46" id="shape-arrow-left"><title>arrow-left</title> <g id="arrow-left-arrow-left"> <path d="M24.4,0.6C24.1,0.2,23.5,0,23,0c-0.5,0-1,0.2-1.4,0.6l-21,21c-0.8,0.8-0.8,2.1,0,2.8l21,21c0.8,0.8,2.1,0.8,2.8,0c0.8-0.8,0.8-2.1,0-2.8L4.9,23L24.4,3.4C25.2,2.6,25.2,1.4,24.4,0.6z"/> </g> </svg></button>',nextArrow:'<button type="button" class="slick-next"><svg viewBox="0 0 26 46" id="shape-arrow-right"><title>arrow-right</title> <g id="arrow-right-arrow-right"> <path d="M1.6,45.4C2,45.8,2.5,46,3,46c0.5,0,1-0.2,1.4-0.6l21-21c0.8-0.8,0.8-2.1,0-2.8l-21-21c-0.8-0.8-2.1-0.8-2.8,0c-0.8,0.8-0.8,2.1,0,2.8L21.2,23L1.6,42.6C0.8,43.4,0.8,44.7,1.6,45.4z"/> </g> </svg></button>',slidesToShow:5,slidesToScroll:1,infinite:!1,variableWidth:!0})},applyNow:function(){function a(a){$(".steps-list button, .steps .step").removeClass("active"),$(".steps-list button[data-step="+a+"]").addClass("active"),$(".steps .step"+a).addClass("active"),$(".steps-navigation .previous").hide(),$(".steps-navigation .next").hide(),$(".steps-navigation .submit").hide(),1==a?$(".steps-navigation .next").show():2==a?($(".steps-navigation .previous").show(),$(".steps-navigation .next").show()):($(".steps-navigation .previous").show(),$(".steps-navigation .submit").show())}$(".steps-list button").on("click",function(){var b=$(this).data("step");a(b)}),$(".steps-navigation button[type=button]").on("click",function(){var b=$(".steps-list button.active").data("step");$(this).hasClass("previous")?b-=1:b+=1,a(b)})},countdown:function(){
// Parse countdown string to an object
function a(a){var b=a.match(g),d={};return c.forEach(function(a,c){d[a]=b[c]}),d}
// Return the time components that diffs
function b(a,b){var d=[];return c.forEach(function(c){a[c]!==b[c]&&d.push(c)}),d}var c=["days","hours","minutes","seconds"],d=$("#countdown").data("date"),e="00:00:00:00:00",f="00:00:00:00:00",g=/([0-9]{2})/gi,h=a(e);c.forEach(function(a,b){$("#countdown").find("."+a+" .curr span").text(h[a]),$("#countdown").find("."+a+" .next span").text(h[a]),$("#countdown").find("."+a+" .label span").text(a)}),$("#countdown").css({opacity:1}),$("#countdown").countdown(d,function(c){var d,g=c.strftime("%D:%H:%M:%S");g!==f&&(e=f,f=g,
// Setup the data
d={curr:a(e),next:a(f)},
// Apply the new values to each node that changed
b(d.curr,d.next).forEach(function(a){var b=".%s".replace(/%s/,a),c=$("#countdown").find(b);
// Update the node
c.removeClass("flip"),c.find(".curr span").text(d.curr[a]),c.find(".next span").text(d.next[a]),
// Wait for a repaint to then flip
setTimeout(function(){c.addClass("flip")},50)}))})}};!function(a){a(function(){grant.init()})}(jQuery);