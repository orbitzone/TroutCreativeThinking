(function(){window.reece=window.reece||{};window.reece.ajaxFilter={};window.reece.ajaxFilter={$el:$("#filter-form"),$content:$("#item-list"),init:function(){this.$el.find('input[type="checkbox"]').on("change.ajax.filter",$.proxy(this.requestData,this))},requestData:function(e){var t=this,n=$(e.currentTarget);category=n.val().trim();e.preventDefault();jQuery.ajax({type:"POST",beforeSend:this.addContentLoader(this.$content),url:"/includes/ajax/ajax-filter.php",data:{category:category},dataType:"JSON",success:function(e){t.removeContentLoader(this.$content);t.fetchTemplate(e,n)}})},addContentLoader:function(e){},removeContentLoader:function(e){},fetchTemplate:function(e,t){var n=2,r=n,i="",s=$('<div class="row-fluid"/>'),o=[];for(var u=0;u<e.length;u++)if(u===r){o.push(s.append(i));i="";i+=tmpl("filter_block_template",e[u]);s=$('<div class="row-fluid"/>');r+=n}else i+=tmpl("filter_block_template",e[u]);o.push(s.append(i));this.appendTemplate(o)},appendTemplate:function(e){this.$content.empty();for(var t=0;t<e.length;t++)this.$content.append(e[t])}}})();$(function(){window.reece.ajaxFilter.init()});