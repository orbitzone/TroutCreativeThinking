var isMobile={Windows:function(){return/IEMobile/i.test(navigator.userAgent)},Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}},deviceMobile=isMobile.any(),isIE=function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE");return b>0?parseInt(a.substring(b+5,a.indexOf(".",b))):navigator.userAgent.match(/Trident\/7\./)?11:!1},playerManager={players:{},active:"",activate:function(a){this.active=a},getActive:function(){return this.players[this.active]},add:function(a,b){this.players[b.container]={player:a,settings:b}},update:function(a,b){this.players[b.container].settings=b},play:function(a){var b=this.players[a].player,c=this.players[a].settings;"undefined"!=typeof b.playVideo&&(c.mute&&b.mute(),b.playVideo())},pause:function(a){if(this.exists(a)){var b=this.players[a].player;"undefined"!=typeof b.pauseVideo&&b.pauseVideo()}},stop:function(a){if(this.exists(a)){var b=this.players[a].player;"undefined"!=typeof b.stopVideo?b.stopVideo():this.getActive().settings.autoplay=!1}},onChangeState:function(a){var b=a.target.c.id,c=this.players[b];a.data===YT.PlayerState.ENDED&&1==c.settings.loop&&this.players[c.settings.container].player.playVideo(),a.data===YT.PlayerState.PLAYING&&"function"==typeof c.settings.onPlaying&&c.settings.onPlaying(),a.data===YT.PlayerState.PAUSED&&"function"==typeof c.settings.onPaused&&c.settings.onPaused(),a.data===YT.PlayerState.BUFFERING&&"function"==typeof c.settings.onBuffering&&c.settings.onBuffering(),a.data===YT.PlayerState.ENDED&&"function"==typeof c.settings.onEnded&&c.settings.onEnded()},exists:function(a){return"undefined"!=typeof this.players[a]?!0:!1},remove:function(a){}},player={settings:{container:"",videoId:"",playerVars:{showinfo:0,modestbranding:0,rel:0},autoplay:!1,loop:!1,mute:!1,onReady:function(){},onEnded:function(){},onPaused:function(){},onBuffering:function(){},onPlaying:function(){}},ready:!1,obj:{},init:function(a){this.settings=$.extend({},this.settings,a);var b=this;if("undefined"==typeof YT||"undefined"==typeof YT.Player){window.onYouTubeIframeAPIReady=function(){playerManager.add(b.loadPlayer(),a)};var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}else playerManager.exists(this.settings.container)?(playerManager.update(this.settings.container,a),playerManager.play(this.settings.container)):playerManager.add(this.loadPlayer(),a)},loadPlayer:function(){playerManager.activate(this.settings.container);var a={videoId:this.settings.videoId,width:790,height:444,playerVars:this.settings.playerVars,events:{onReady:function(a){var b=a.target.c.id,c=playerManager.players[b];if(1!=c.settings.autoplay||isMobile.any()||("undefined"!=typeof c.settings.mute?playerManager.play(c.settings.container,c.settings.mute):playerManager.play(c.settings.container)),"function"==typeof c.settings.onReady){var d=c.settings.onReady;setTimeout(function(){d()},500)}$(window).resize()},onStateChange:function(a){console.log(a),playerManager.onChangeState(a)}}};return new YT.Player(player.settings.container,a)},play:function(a,b){var c=player.obj[a].player;"undefined"!=typeof c.playVideo&&("undefined"!=typeof b&&b&&c.mute(),c.playVideo())},stop:function(a){if("undefined"!=typeof a){var b=player.obj[a].player;"undefined"!=typeof b.stopVideo?b.stopVideo():player.autoplay=!1}else $.each(player.obj,function(a){"undefined"!=typeof player.obj[a].player.stopVideo&&player.obj[a].player.stopVideo()})}},bathroomHappiness={init:function(){1==isMobile.any()?$("body").addClass("mobile"):$("body").addClass("desktop"),$("body").hasClass("homepage")&&this.homepage(),$("body").hasClass("inspiration")&&this.inspiration(),$("body").hasClass("trends")&&this.trends(),$("body").hasClass("water-therapy")&&this.waterTherapy()},homepage:function(){$(".subscribe-form").validate(),$(".panel-slideshow").each(function(){var a=$(this).find(".slideshow-buttons");$(this).find(".slideshow-container").slick({appendArrows:a,responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:460,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}}]})}),$(".panel-slideshow").each(function(){var a=$(this).data("section");$(this).find(".slideshow-container a").on("mouseover",function(){$("."+a).addClass("hover")}).on("mouseout",function(){$("."+a).removeClass("hover")})})},inspiration:function(){var a=$(".block.water-therapy .video").data("video");if($(window).on("resize",function(){var a=$(".blocks .water-therapy .content").height(),b=16*a/9;$("#water-therapy-video").width(b),$("#water-therapy-video").height(a+200)}).resize(),isMobile.any())$("#water-therapy-video").parent().addClass("ready"),isMobile.any()&&$("#water-therapy-video").remove();else{var b="water-therapy-video";if(a){var c={showinfo:0,modestbranding:0,rel:0};player.init({container:b,videoId:a,autoplay:1,mute:1,loop:1,onReady:function(){$("#water-therapy-video").parent().parent().parent().addClass("ready"),$("#water-therapy-video").parent().addClass("ready")},playerVars:c})}}},trends:function(){},waterTherapy:function(){$(window).on("resize",function(){var a=$("#banner .banner").width(),b=9*a/16;$("#water-therapy-video").width(a),$("#water-therapy-video").height(b),deviceMobile?(a=$(window).width(),b=$(window).height(),$("#water-therapy-full-video").height(b),$("#water-therapy-full-video").width(a)):($("#water-therapy-full-video").height(b),$("#water-therapy-full-video").width(a));var a=$("#water-therapy .videos").width(),b=9*a/16;$("#water-therapy .videos iframe").width(a),$("#water-therapy .videos iframe").height(b)}).resize();var a=["water-therapy","water-therapy-therapeutic","water-therapy-relaxation","water-therapy-rejuvenation"],b=function(c){if(c<a.length){var d=a[c]+"-video",e=$("#"+a[c]+"-video-wrap").data("video");if(c++,e){var f={showinfo:0,modestbranding:0,rel:0,controls:0};player.init({container:d,videoId:e,autoplay:1,loop:1,mute:1,onReady:function(){$("#"+d).parent().parent().addClass("ready"),$("#"+d).parent().addClass("ready"),b(c)},playerVars:f})}}};isMobile.any()?($("#water-therapy-video").addClass("ready"),isMobile.any()&&$("#water-therapy-video").remove(),$("#water-therapy-therapeutic-video").addClass("ready"),isMobile.any()&&$("#water-therapy-therapeutic-video").remove()):b(0),$("#banner .stop-full-video").on("click",function(){var a="water-therapy-full-video";playerManager.stop(a),deviceMobile&&$.magnificPopup.close(),$("#banner .stop-full-video").removeClass("show"),$("#banner .play-full-video").removeClass("paused playing"),$("#water-therapy-full-video").fadeOut(300,0)}),$("#banner .play-full-video").on("click",function(){var a="water-therapy-full-video";if($(this).hasClass("playing"))$(this).removeClass("playing"),$(this).addClass("paused"),playerManager.pause(a);else{$("#banner .stop-full-video").addClass("show"),$(this).addClass("playing"),$("#water-therapy-full-video").show(),($(window).width()<768||deviceMobile)&&$.magnificPopup.open({mainClass:"mfp-water-therapy-full-video",items:{type:"inline",src:"#full-video-popup",callbacks:{afterClose:function(){$("#banner .play-full-video").removeClass("paused playing"),player.stop("water-therapy-full-video")}}}});var b=$(this).data("video");if(b){var c={showinfo:0,modestbranding:0,rel:0},d=1;($(window).width()<768||deviceMobile)&&(d=0),player.init({container:a,videoId:b,autoplay:d,loop:!1,onReady:function(){$("#water-therapy-full-video").parent().addClass("ready")},onPlaying:function(){$("#banner .play-full-video").addClass("playing"),$("#water-therapy-full-video").fadeIn(300,0)},onEnded:function(){deviceMobile&&$.magnificPopup.close(),$("#banner .play-full-video").removeClass("paused playing"),$("#water-therapy-full-video").fadeOut(300,0)},onPaused:function(){$("#banner .play-full-video").removeClass("paused playing"),$("#banner .play-full-video").addClass("paused")},playerVars:c}),$("#water-therapy-full-video").show()}}}),$(".submenu button").on("click",function(){$(".submenu li").removeClass("active"),$(this).parent().addClass("active");var a=$(this).text().toLowerCase();if($("#water-therapy").attr("class",a),!deviceMobile){var b="water-therapy-"+a+"-video",c=$("#"+b+"-wrap").data("video");if(c){var d={showinfo:0,modestbranding:0,rel:0,controls:0};player.init({container:b,videoId:c,autoplay:1,loop:1,mute:1,onReady:function(){$("#"+b).parent().parent().parent().addClass("ready"),$("#"+b).parent().addClass("ready")},playerVars:d})}setTimeout(function(){var b=["therapeutic","relaxation","rejuvenation"];$.each(b,function(b,c){c!==a&&playerManager.pause("water-therapy-"+c+"-video")})},1e3)}$("html, body").animate({scrollTop:$("#intro .video-wrap").offset().top},500)}),$("#water-therapy .slides").slick({arrows:!1,dots:!0}),$(window).on("scroll",function(){deviceMobile&&($(window).scrollTop()>=$(".submenu-wrap").offset().top?($(".submenu-wrap").height($(".submenu").height()),$(".submenu").addClass("fixed")):($(".submenu-wrap").height(""),$(".submenu").removeClass("fixed")))})}};!function(a){a(function(){bathroomHappiness.init()})}(jQuery);