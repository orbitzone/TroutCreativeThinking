(function(){window.reece=window.reece||{};window.reece.ajaxProducts={};window.reece.ajaxProducts={$el:$("[data-load-content]"),offset:8,init:function(){this.$el.on("click.contentload.data-api",$.proxy(this.requestData,this))},requestData:function(e){e.preventDefault();var t=this,n=$(e.currentTarget);t.offset+=4;jQuery.ajax({type:"POST",beforeSend:this.addContentLoader(n),url:"/includes/ajax/ajax-products.php",data:{offset:t.offset},dataType:"JSON",success:function(e){t.removeContentLoader(n);t.fetchTemplate(e,n)}})},addContentLoader:function(e){e.addClass("ajax-preloader")},removeContentLoader:function(e){e.removeClass("ajax-preloader")},fetchTemplate:function(e,t){var n=4,r=n,i="",s=$('<div style="display: none;" class="row-fluid"/>'),o=[];for(var u=0;u<e.length;u++)if(u===r){o.push(s.append(i));i="";i+=tmpl("product_block_template",e[u]);s=$('<div style="display: none;" class="row-fluid"/>');r+=n}else i+=tmpl("product_block_template",e[u]);o.push(s.append(i));this.appendTemplate(o,t)},appendTemplate:function(e,t){for(var n=0;n<e.length;n++){t.before(e[n]);e[n].slideDown()}}}})();$(function(){window.reece.ajaxProducts.init()});